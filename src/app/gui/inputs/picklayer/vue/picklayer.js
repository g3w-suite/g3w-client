const Input = require('gui/inputs/input');
const Service = require('../service');

const PickLayerInput = Vue.extend({
  mixins: [Input],
  template: require('./picklayer.html'),
  methods: {
    pickLayer() {
      this.pickservice.pick()
        .then((value) => this.state.value = value).catch(() => {});
    },
    unpick() {
      setTimeout(() => !this.pickservice.isPicked() && this.pickservice.unpick(), 200);
    },
  },
  created() {
    this.pickservice = new Service(this.state.input.options);
  },
  beforeDestroy() {
    this.pickservice.clear();
    this.pickservice = null;
  },
});

module.exports = PickLayerInput;
